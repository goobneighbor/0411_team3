<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.t09ether.home.dao.PaymentDAO">
	<insert id="payInsert">
		insert into payment(pay_no, r_merchant_uid,ord_no, total_amount, discount_amount, final_amount) values(#{imp_uid}, #{merchant_uid}, #{ord_no}, #{total_amount}, #{discount_amount}, #{final_amount})
	</insert>
	<select id="paymentSelect" resultType="com.t09ether.home.dto.PaymentDTO">
		select p.pro_name, p.image, o.pay_no, o.r_merchant_uid, o.ord_no, o.total_amount, o.discount_amount, o.final_amount, o.payment_date, o.pro_code,o.userid, o.ord_count, o.status, o.on_no, o.orderdate from product p join (select p.pay_no, p.r_merchant_uid, p.ord_no, p.total_amount, p.discount_amount, p.final_amount, p.payment_date, o.pro_code, o.userid, o.ord_count, o.status, o.on_no, o.orderdate  from payment p join order09 o on p.ord_no=o.ord_no and o.ord_no=#{param1}) o on p.pro_code=o.pro_code
	</select>
</mapper>